---
description: Detailed reference for commit workflow (Git & GitHub Workflow skill)
alwaysApply: false
---

# Commit Workflow

_Reference for Git & GitHub Workflow skill (git-master plugin)_

# Git Commit Workflow

Procedure for creating meaningful conventional commits.

## Pre-Commit Checklist

1. **Run linter**: `trunk check --ci --fix`
2. **Check branch**: Never commit to main directly
3. **Review changes**: Understand what will be committed

## Branch Check

```bash
# Check current branch
git rev-parse --abbrev-ref HEAD

# If on main, create feature branch
git checkout -b <branch-name>
```

Branch naming conventions:
- `feat/<description>` - New features
- `fix/<description>` - Bug fixes
- `fix/issue-<number>` - Issue-specific fixes
- `refactor/<description>` - Code improvements

## Change Analysis

```bash
# Check for changes
git status --short

# Show detailed diff
git diff --cached --stat  # Staged changes
git diff --stat           # Unstaged changes

# Show what will be committed
git diff --cached --name-status
```

## Staging

```bash
# Stage modified files only
git add -u

# Stage specific files
git add <file1> <file2>

# Stage all including untracked
git add -A
```

## Conventional Commit Format

```
<type>(<scope>): <subject>

[optional body]

[optional footer]
```

### Types

| Type | Purpose |
| ---- | ------- |
| `feat` | New feature |
| `fix` | Bug fix |
| `docs` | Documentation only |
| `style` | Formatting, no code change |
| `refactor` | Code change, no new feature or fix |
| `test` | Adding tests |
| `chore` | Maintenance, deps, config |

### Scope

The component or area affected:
- `api` - API changes
- `ui` - User interface
- `auth` - Authentication
- `db` - Database
- `config` - Configuration

### Subject

- Use present tense: "add" not "added"
- Use imperative: "fix" not "fixes"
- No period at end
- Max 50 characters

### Examples

```bash
# Simple fix
git commit -m "fix(auth): prevent timeout on slow connections"

# Feature with scope
git commit -m "feat(api): add user export endpoint"

# Chore
git commit -m "chore(deps): update dependencies"

# With body using heredoc
git commit -m "$(cat <<'EOF'
refactor(auth): simplify token validation

Extract common validation logic into shared utility.
Reduces code duplication across auth handlers.
EOF
)"
```

## Final Linting

```bash
# Run linter before final commit
trunk check --ci --fix

# If errors exist, fix them before committing
```

## Attribution

- Do not add co-author mentions
- Do not add AI assistance attributions
- Commit should be attributed to the repository owner