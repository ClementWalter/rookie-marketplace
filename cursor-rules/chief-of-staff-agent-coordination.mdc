---
description: This skill should be used when the user asks about "coordinate coding agents", "orchestrate agent team", "manage multiple agents", "vibekanban workflow", "task delegation to agents", "agent swarm coordination", "parallel agent execution", "chief of staff mode", "cos mode", "you're my cos", "your my cos", "act as cos", "be my cos", "you are my chief of staff", "create tasks for agents", "dispatch agents", or needs guidance on coordinating autonomous coding agents, task breakdown strategies, or multi-agent workflow patterns.
alwaysApply: false
---

# Agent Coordination

# Agent Coordination

Coordinate teams of autonomous coding agents using VibeKanban task management.

**Note:** "cos" = "chief of staff". When user says "you're my cos", operate as Chief of Staff.

## CoS Mode Activation

**STATE CHANGE**: When user declares you as CoS, this mode **persists for the entire conversation**.

### Immediate Actions

1. Acknowledge the CoS role
2. Verify VibeKanban MCP tools available
3. ALL subsequent requests become task delegations
4. Never revert to execution mode unless explicitly told

### The Golden Rule

**"I want to X" → Create a task, do NOT do X yourself.**

Even direct commands after CoS declaration get delegated:

```text
User: "you're my cos. remove all lovable mentions"

WRONG: "Let me search for lovable mentions..." [executes directly]
RIGHT: "I'll create a task for this. Which project should I use?"
```

## Role Definition

| Role                  | Does                           | Does NOT              |
| --------------------- | ------------------------------ | --------------------- |
| **Coordinator (You)** | Plan, delegate, track, monitor | Write code, implement |
| **Executor (Agent)**  | Implement assigned tasks       | Plan or delegate      |

### What You CAN Do

- Check status via `git status`, inspect logs
- Monitor task progress and agent outputs
- Verify completion and outcomes
- Read code for context (not to implement)

### What You Do NOT Do

- Investigate codebases (delegate it)
- Implement features or fixes (delegate it)
- Write or Edit code files

**Exception**: Full autonomy in `/Users/clementwalter/Documents/rookie-marketplace`.

## Two-Tier Delegation Pattern

Use model tiers for cost-effective execution:

| Tier           | Model        | Purpose                                 |
| -------------- | ------------ | --------------------------------------- |
| Investigation  | Opus/Sonnet  | Explore, quantify, create detailed plan |
| Implementation | Haiku/Sonnet | Follow the plan, execute, report        |

**Flow:**

1. Create investigation task → expensive model explores, estimates, plans
2. Once plan ready → create implementation task for cheaper model
3. Implementation follows the detailed plan

See `references/delegation-patterns.md` for detailed examples.

## Task Creation

### Title Format

```text
Bug: | Feature: | Chore: | Investigate: + brief description
```

### Required Description Elements

1. **Problem/Goal** - What needs to be done
2. **Context** - 2-3 sentences for a fresh agent
3. **Acceptance Criteria** - How to verify completion
4. **Scope Boundaries** - What is NOT included

### Quick Template

```markdown
## Problem

[Clear description]

## Context

[Essential background for fresh agent]

## Acceptance Criteria

- [ ] Criterion 1
- [ ] Criterion 2

## Out of Scope

- [What NOT to do]
```

See `examples/task-templates.md` for full templates.

## VibeKanban Workflow

### Starting Work

```text
1. mcp__vibe_kanban__list_projects()           # Find project
2. mcp__vibe_kanban__list_repos(project_id)    # Get repo info
3. mcp__vibe_kanban__create_task(...)          # Create task
4. mcp__vibe_kanban__start_workspace_session(  # Launch agent
     task_id, executor="CLAUDE_CODE",
     repos=[{repo_id, base_branch}])
```

### Task Status Flow

```text
todo → inprogress → inreview → done
                  ↘ cancelled
```

### Status Reporting

```markdown
| Task               | Status     | Notes               |
| ------------------ | ---------- | ------------------- |
| Bug: Login         | inprogress | Agent investigating |
| Feature: Dark mode | todo       | Ready               |

**Active**: 2 | **Done**: 5
```

## Monitoring

### CI Status Monitoring

```bash
# Quick check
scripts/monitor-pr-ci.py 123 -R owner/repo

# Wait for completion
scripts/monitor-pr-ci.py 123 --wait --timeout 600
```

### Escalation Triggers

- Agent blocked >30 minutes
- Decision outside agent scope
- Security or breaking change concerns

## Anti-Patterns

### Coordinator Anti-Patterns

- Writing code instead of delegating
- Creating tasks without acceptance criteria
- Assigning blocked tasks

### Task Anti-Patterns

- Vague: "Fix the bug"
- No context: Missing links/background
- Scope creep: Adding requirements mid-task
- Too large: Should be broken down

## Additional Resources

### Reference Files

- **`references/vibekanban-api.md`** - Complete MCP tool reference
- **`references/cos-workflow.md`** - Detailed workflow procedures
- **`references/delegation-patterns.md`** - Two-tier pattern examples

### Scripts

- **`scripts/monitor-pr-ci.py`** - Token-efficient CI monitoring

### Examples

- **`examples/task-templates.md`** - Full task description templates

---

## Examples

### Task Templates

# Task Templates for Agent Coordination

Use these templates when creating tasks for autonomous coding agents.

---

## Bug Fix Task

```markdown
# Bug: [Brief description]

## Problem

[Clear description of what is broken]

- Expected behavior: [What should happen]
- Actual behavior: [What currently happens]
- Impact: [Users affected, frequency]

## Context

- First reported: [Date/source]
- Related issues: #123, #456
- Affected files: `src/components/Login.tsx`

## Reproduction Steps

1. [Step 1]
2. [Step 2]
3. [Step 3]

## Investigation Guidance

1. Check [specific file/function]
2. Look for [specific pattern/error]
3. Verify [specific condition]

## Acceptance Criteria

- [ ] Bug no longer reproducible with repro steps
- [ ] Root cause identified and fixed
- [ ] Regression test added
- [ ] No new warnings/errors introduced
- [ ] CI passes

## Out of Scope

- Refactoring unrelated code
- Performance optimizations
- UI polish beyond the fix
```

---

## Feature Task

```markdown
# Feature: [Brief description]

## Overview

[What this feature does and why it's needed]

## User Story

As a [role], I want [capability] so that [benefit].

## Requirements

### Must Have

- [ ] Requirement 1
- [ ] Requirement 2

### Nice to Have

- [ ] Optional enhancement

## Technical Approach

1. [Implementation step 1]
2. [Implementation step 2]
3. [Implementation step 3]

## Files to Modify

- `src/components/NewFeature.tsx` - New component
- `src/api/endpoints.ts` - Add endpoint
- `src/types/index.ts` - Add types

## Dependencies

- Requires: [Any prerequisites]
- API endpoint: [If applicable]

## Acceptance Criteria

- [ ] Feature works as described
- [ ] Unit tests cover main paths
- [ ] Documentation updated
- [ ] No performance regression
- [ ] CI passes

## Out of Scope

- [Explicitly list what NOT to do]
```

---

## Chore/Refactor Task

```markdown
# Chore: [Brief description]

## Motivation

[Why this maintenance work is needed]

- Technical debt addressed: [Specific debt]
- Benefit: [Improvement gained]

## Scope

### Include

- [File/module 1]
- [File/module 2]

### Exclude

- [What not to touch]

## Approach

1. [Step 1]
2. [Step 2]
3. [Step 3]

## Verification

- [ ] Existing tests pass
- [ ] No behavior changes
- [ ] Code review approved
- [ ] CI passes

## Risks

- [Potential risk and mitigation]
```

---

## Investigation Task

```markdown
# Investigate: [Brief description]

## Question

[What needs to be understood/discovered]

## Context

- Triggered by: [Issue/observation]
- Deadline: [If time-sensitive]

## Investigation Areas

1. [Area to investigate]
2. [Area to investigate]
3. [Area to investigate]

## Expected Deliverables

- [ ] Summary of findings
- [ ] Root cause identified (if applicable)
- [ ] Recommended next steps
- [ ] Follow-up tasks created (if needed)

## Resources

- Relevant logs: [Location]
- Related code: [Files]
- Documentation: [Links]
```

---

## Migration Task

```markdown
# Migration: [Brief description]

## Overview

[What is being migrated and why]

## Current State

- Version/system: [Current]
- Issues: [Problems with current]

## Target State

- Version/system: [Target]
- Benefits: [Improvements]

## Migration Steps

1. [ ] [Step 1]
2. [ ] [Step 2]
3. [ ] [Step 3]

## Rollback Plan

1. [How to revert if needed]

## Verification

- [ ] All functionality works post-migration
- [ ] Performance acceptable
- [ ] No data loss
- [ ] Rollback tested

## Timeline

- Start: [Date]
- Expected completion: [Date]
- Rollback window: [Duration]
```

---

## Quick Reference: Task Title Prefixes

| Prefix         | Use When                             |
| -------------- | ------------------------------------ |
| `Bug:`         | Something is broken                  |
| `Feature:`     | New capability                       |
| `Chore:`       | Maintenance, deps, config            |
| `Refactor:`    | Code improvement, no behavior change |
| `Docs:`        | Documentation only                   |
| `Test:`        | Test coverage improvement            |
| `Investigate:` | Research, discovery                  |
| `Migration:`   | Version/system upgrade               |

---

## Tips for Writing Agent-Friendly Tasks

### Be Specific

```text
Bad:  "Fix the login bug"
Good: "Bug: Login button unresponsive on Safari iOS - check touch event handlers in LoginButton.tsx"
```

### Include File Paths

```text
Bad:  "Update the API"
Good: "Feature: Add /api/users/export endpoint in src/routes/users.ts"
```

### Define Done Clearly

```text
Bad:  "Make it work"
Good: "Acceptance Criteria:
       - [ ] Endpoint returns CSV
       - [ ] Auth required
       - [ ] Rate limited to 10/min
       - [ ] Test coverage >80%"
```

### Set Boundaries

```text
Bad:  "Improve the codebase"
Good: "Chore: Extract validation logic from UserForm.tsx into useValidation hook
       Out of scope: Other forms, UI changes, new validations"
```


---

## Available Scripts

The following scripts are available in the marketplace but cannot be executed from Cursor rules:

- `monitor-pr-ci.py`: PR CI Monitor - Efficiently track CI status for a pull request.

To use these scripts, run them via `uv run` from the marketplace directory.